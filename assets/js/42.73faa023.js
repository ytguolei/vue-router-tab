(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{307:function(v,e,_){"use strict";_.r(e);var o=_(19),t=Object(o.a)({},(function(){var v=this,e=v.$createElement,_=v._self._c||e;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"方案"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#方案"}},[v._v("#")]),v._v(" 方案")]),v._v(" "),_("p",[v._v("Vue Router Tab 实现过程中遇到的"),_("strong",[v._v("问题及解决方案")]),v._v("，也欢迎提出更好的点子。")]),v._v(" "),_("ol",[_("li",[_("p",[_("code",[v._v("keep-alive")]),v._v(" 仅支持根据组件 "),_("code",[v._v("name")]),v._v(" 控制缓存，无法针对路由精确控制：")]),v._v(" "),_("p",[v._v("参考 "),_("code",[v._v("keep-alive")]),v._v(" 实现 "),_("code",[v._v("router-alive")]),v._v(" 组件，基于 Vue Router 路由规则的缓存控制")])]),v._v(" "),_("li",[_("p",[v._v("页面组件强制刷新：")]),v._v(" "),_("ol",[_("li",[v._v("销毁页面组件实例")]),v._v(" "),_("li",[_("code",[v._v("router-view")]),v._v(" 组件通过 "),_("code",[v._v("v-if")]),v._v(" 隐藏，在 "),_("code",[v._v("nextTick")]),v._v(" 后再显示")])])]),v._v(" "),_("li",[_("p",[v._v("由于缓存，Webpack 热加载后的页面不刷新：")]),v._v(" "),_("p",[v._v("在 "),_("code",[v._v("router-alive")]),v._v(" 的 "),_("code",[v._v("render")]),v._v(" 函数内，记录 "),_("code",[v._v("vnode.componentOptions.Ctor.cid")]),v._v("。如果与上一次页面缓存实例的记录值不一致，则销毁页面组件，重新渲染")])]),v._v(" "),_("li",[_("p",[v._v("当快速频繁切换页签时，页面显示空白：")]),v._v(" "),_("p",[v._v("根因：旧页面离开的过渡效果尚未完成，新页面内容来不及 mount 又被后面的路由替换")]),v._v(" "),_("p",[v._v("方案：路由切换结束后，如果路由页面节点 "),_("code",[v._v("nodeType")]),v._v(" 为 8 (comment 类型)，强制刷新页面组件")])]),v._v(" "),_("li",[_("p",[v._v("iframe 页面页签切换后会重新加载：")]),v._v(" "),_("ol",[_("li",[_("p",[v._v("将  "),_("code",[v._v("<iframe>")]),v._v(" 节点放在页面所在 "),_("code",[v._v("<router-view>")]),v._v(" 的外层，通过 "),_("code",[v._v("v-show")]),v._v(" 控制显示隐藏。")])]),v._v(" "),_("li",[_("p",[v._v("建立 iframe 路由页面组件，通过生命周期钩子来添加、显示、隐藏、移除 "),_("code",[v._v("<iframe>")]),v._v(" dom 节点")])])])]),v._v(" "),_("li",[_("p",[v._v("打包后的 js 文件太庞大：")]),v._v(" "),_("p",[v._v("构建库时，配置 "),_("code",[v._v("babel.config.js")]),v._v(" 中 "),_("code",[v._v("useBuiltIns")]),v._v(" 为 "),_("code",[v._v("false")]),v._v("，打包时不包含 Polyfill")])])])])}),[],!1,null,null,null);e.default=t.exports}}]);